{% extends 'apps/base.html' %}
{% load static %}

{% block title %}
    CheckOut Page
{% endblock %}

{% block content %}
    <div class="row no-gutters">
        <div class="col-xl-4 order-xl-1 pl-xl-2">
            <div class="card mb-3">
                <div class="card-header bg-light btn-reveal-trigger d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Order Summary</h5>
                    <a class="btn btn-link btn-sm btn-reveal text-600"
                       href="{% url 'shopping_cart_page' %}">
                    <span class="" data-fa-i2svg="">
                        <svg class="svg-inline--fa fa-pencil-alt fa-w-16" aria-hidden="true" focusable="false"
                             data-prefix="fas" data-icon="pencil-alt" role="img" xmlns="http://www.w3.org/2000/svg"
                             viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor"
                                                                          d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"></path></svg></span></a>
                </div>
                <div class="card-body">
                    <table class="table table-borderless fs--1 mb-0">
                        <tbody>
                        {% for cart_item in cart_items %}
                            <tr class="border-bottom">
                                <th class="pl-0 pt-0">
                                    {{ cart_item.product.name }}
                                    <div class="text-400 font-weight-normal fs--2">
                                        {{ cart_item.product.short_description|safe }}
                                    </div>
                                </th>
                                <th class="pr-0 text-right pt-0">
                                    {{ cart_item.quantity }} x ${{ cart_item.product.price }}
                                </th>
                            </tr>
                        {% endfor %}
                        <tr class="border-bottom">
                            <th class="pl-0">Subtotal</th>
                            <th class="pr-0 text-right">${{ subtotal_cost }}</th>
                        </tr>
                        <tr class="border-bottom">
                            <th class="pl-0">Shipping</th>
                            <th class="pr-0 text-right">${{ shipping_cost }}</th>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="card-footer d-flex justify-content-between bg-100">
                    <div class="font-weight-semi-bold">Payable Total</div>
                    <div class="font-weight-bold">${{ subtotal_cost|add:shipping_cost }}</div>
                </div>
            </div>
        </div>
        <div class="col-xl-8 pr-xl-2">
            <form action="{% url 'checkout_page' %}" method="post">
                {% csrf_token %}
                <div class="card mb-3">
                    <div class="card-header bg-light">
                        <div class="row justify-content-between align-items-center">
                            <div class="col-sm-auto">
                                <h5 class="mb-2 mb-sm-0">Your Shipping Address</h5>
                            </div>
                            <div class="col-sm-auto"><a class="btn btn-falcon-default btn-sm" href="#!"><span
                                    class="mr-2"
                                    data-fa-transform="shrink-2"
                                    data-fa-i2svg=""><svg
                                    class="svg-inline--fa fa-plus fa-w-14" data-fa-transform="shrink-2"
                                    aria-hidden="true"
                                    focusable="false" data-prefix="fas" data-icon="plus" role="img"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><g
                                    transform="translate(224 256)"><g
                                    transform="translate(0, 0)  scale(0.875, 0.875)  rotate(0 0 0)"><path
                                    fill="currentColor"
                                    d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"
                                    transform="translate(-224 -256)"></path></g></g></svg></span>Add New Address</a>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3 mb-md-0">
                                <div class="custom-control custom-radio radio-select">
                                    <input class="custom-control-input" id="address-1" type="radio" name="address">
                                    <label class="custom-control-label font-weight-bold d-block" for="address-1">Antony
                                        Hopkins<span class="radio-select-content"><span> 2392 Main Avenue,<br>Pensaukee,<br>New Jersey 02139<span
                                                class="d-block mb-0 pt-2">+(856) 929-229</span></span></span></label><a
                                        class="mt-2 fs--1" href="#!">Edit</a>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="position-relative">
                                    <div class="custom-control custom-radio radio-select">
                                        <input class="custom-control-input" id="address-2" type="radio"
                                               name="clientName">
                                        <label class="custom-control-label font-weight-bold d-block" for="address-2">Robert
                                            Bruce<span
                                                    class="radio-select-content"><span>3448 Ile De France St #242,<br>Fort Wainwright, <br>Alaska, 99703<span
                                                    class="d-block mb-0 pt-2">+(901) 637-734</span></span></span></label><a
                                            class="mt-2 fs--1" href="#!">Edit</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Payment Method</h5>
                    </div>
                    <div class="card-body">
                        <div class="custom-control custom-radio">
                            <input class="custom-control-input radio-collapse" type="radio" name="payment_type"
                                   id="credit-card" checked="checked" value="online">
                            <label class="custom-control-label" for="credit-card"><span
                                    class="d-flex align-items-center mb-2 fs-1">Online</span>
                            </label>
                        </div>
                        <div class="row">
                            <div class="col-sm-8 pl-5 ml-n2">
                                <div class="form-group">
                                    <label class="ls text-uppercase text-600 font-weight-semi-bold mb-0">
                                        Card Number
                                    </label>
                                    <input class="form-control" type="text" name="card_number"
                                           placeholder="•••• •••• •••• ••••">
                                </div>
                                <div class="form-row align-items-center">
                                    <div class="col-6">
                                        <div class="form-group">
                                            <label class="ls text-uppercase text-600 font-weight-semi-bold mb-0">
                                                Exp Date
                                            </label>
                                            <input class="form-control" type="text" placeholder="mm/yyyy"
                                                   name="exp_date">
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="form-group">
                                            <label class="ls text-uppercase text-600 font-weight-semi-bold mb-0">
                                                CVV
                                                <a class="d-inline-block" href="#">
                                                <span class="ml-2"
                                                      data-toggle="tooltip"
                                                      data-placement="top" title=""
                                                      data-original-title="Card verification value"
                                                      data-fa-i2svg=""><svg
                                                        class="svg-inline--fa fa-question-circle fa-w-16"
                                                        data-toggle="tooltip"
                                                        data-placement="top" title="Card verification value"
                                                        aria-labelledby="svg-inline--fa-title-WxCql33cJP7u"
                                                        data-prefix="fa"
                                                        data-icon="question-circle" role="img"
                                                        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
                                                        data-fa-i2svg=""><title id="svg-inline--fa-title-WxCql33cJP7u">Card verification value</title><path
                                                        fill="currentColor"
                                                        d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"></path></svg></span></a></label>
                                            <input class="form-control" type="text" placeholder="123" maxlength="3"
                                                   pattern="[0-9]{3}" name="cvv">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 text-center pt-2 d-none d-sm-block">
                                <div class="rounded p-2 mt-3 bg-100">
                                    <div class="text-uppercase fs--2 font-weight-bold">We Accept</div>
                                    <img src="{% static 'apps/assets/img/icons/icon-payment-methods-grid.png' %}" alt=""
                                         width="120">
                                </div>
                            </div>
                        </div>
                        <div class="custom-control custom-radio">
                            <input class="custom-control-input" type="radio" name="payment_type" id="cash" value="cash">
                            <label class="custom-control-label" for="cash"><span
                                    class="d-flex align-items-center mb-2 fs-1">Cash</span>
                            </label>
                        </div>
                        <hr class="border-dashed my-5">
                        <div class="row">
                            <div class="col-md-7 col-xl-12 col-xxl-7 px-md-3 mb-xxl-0">
                                <div class="media"><img class="mr-3"
                                                        src="{% static 'apps/assets/img/icons/shield.png' %}"
                                                        alt="" width="60">
                                    <div class="media-body">
                                        <h5 class="mb-2">Buyer Protection</h5>
                                        <div class="custom-control custom-checkbox">
                                            <input class="custom-control-input" id="protection-option-1" type="checkbox"
                                                   checked="">
                                            <label class="custom-control-label" for="protection-option-1"> <strong>Full
                                                Refund </strong>If you don't <br class="d-none d-md-block d-lg-none">receive
                                                your order</label>
                                        </div>
                                        <div class="custom-control custom-checkbox">
                                            <input class="custom-control-input" id="protection-option-2" type="checkbox"
                                                   checked="">
                                            <label class="custom-control-label" for="protection-option-2"> <strong>Full
                                                or
                                                Partial Refund, </strong>If the product is not as described in
                                                details</label>
                                        </div>
                                        <a class="fs--1 ml-3 pl-2" href="#!">Learn More<span class="ml-1"
                                                                                             data-fa-transform="down-2"
                                                                                             data-fa-i2svg=""><svg
                                                class="svg-inline--fa fa-caret-right fa-w-6" data-fa-transform="down-2"
                                                aria-hidden="true" focusable="false" data-prefix="fas"
                                                data-icon="caret-right" role="img" xmlns="http://www.w3.org/2000/svg"
                                                viewBox="0 0 192 512" data-fa-i2svg=""><g transform="translate(96 256)"><g
                                                transform="translate(0, 64)  scale(1, 1)  rotate(0 0 0)"><path
                                                fill="currentColor"
                                                d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"
                                                transform="translate(-96 -256)"></path></g></g></svg></span></a>
                                    </div>
                                </div>
                                <div class="vertical-line d-none d-md-block d-xl-none d-xxl-block"></div>
                            </div>
                            <div class="col-md-5 col-xl-12 col-xxl-5 pl-lg-4 pl-xl-2 pl-xxl-5 text-center text-md-left text-xl-center text-xxl-left">
                                <hr class="border-dashed d-block d-md-none d-xl-block d-xxl-none my-4">
                                <div class="fs-2 font-weight-semi-bold">All Total: <span
                                        class="text-primary">${{ subtotal_cost|add:shipping_cost }}</span>
                                </div>
                                <button class="btn btn-success mt-3 px-5" type="submit">Confirm &amp; Pay</button>
                                <p class="fs--1 mt-3 mb-0">By clicking <strong>Confirm &amp; Pay </strong>button you
                                    agree
                                    to the <a href="#!">Terms &amp; Conditions</a></p>
                            </div>
                        </div>
                    </div>
                </div>
                {% if form.non_field_errors %}
                    <div class="alert alert-danger" style="color: white; background-color: #dc3545;">
                        {% for error in form.non_field_errors %}
                            {{ error }}
                        {% endfor %}
                    </div>
                {% endif %}
            </form>
        </div>
    </div>
{% endblock %}